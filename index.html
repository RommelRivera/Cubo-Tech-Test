<html>
  <head>
    <title>Cubo+ Technical Test</title>
    <script src="https://mempool.space/mempool.js"></script>
    <script>
      const init = async () => {
        const { bitcoin: { addresses } } = mempoolJS({
          hostname: 'mempool.space'
        });

        const address = '32ixEdVJWo3kmvJGMTZq5jAQVZZeuwnqzo';
        const myAddress = await addresses.getAddressTxs({ address: address, after_txid: '45dd929a6d9f49a04713eb392125096537e61cab9b7b8ba7f7d3745eaf7f9640' });

        function SAT(value) {
          return value / 100000000;
        };

        //const chain_balance = SAT(myAddress.chain_stats.funded_txo_sum - myAddress.chain_stats.spent_txo_sum);
        //const mempool_balance = SAT(myAddress.mempool_stats.funded_txo_sum - myAddress.mempool_stats.spent_txo_sum);
        // Current date
        // 30 days prior to date
        // 7 days prior to date

        document.getElementById("result").textContent = JSON.stringify(myAddress, undefined, 2);//"On-chain balance: " + chain_balance + " BTC\nMempool balance: " + mempool_balance + " BTC";
      };
      init();
    </script>
  </head>
  <body>
    <pre id="result"></pre>
  </body>
</html>
